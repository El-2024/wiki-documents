---
description: ReSpeaker 4-Mic Array for Raspberry Pi
title: ReSpeaker 4-Mic Array for Raspberry Pi
keywords:
- reSpeaker
image: https://files.seeedstudio.com/wiki/wiki-platform/S-tempor.png
slug: /cn/ReSpeaker_4_Mic_Array_for_Raspberry_Pi
last_update:
  date: 1/11/2023
  author: jianjing Huang
---


![](https://files.seeedstudio.com/wiki/ReSpeaker-4-Mic-Array-for-Raspberry-Pi/img/overview.jpg)

ReSpeaker 4-Mic Array for Raspberry Pi æ˜¯ä¸€æ¬¾ä¸º Raspberry Pi è®¾è®¡çš„å››éº¦å…‹é£æ‰©å±•æ¿ï¼Œä¸“ç”¨äº AI å’Œè¯­éŸ³åº”ç”¨ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥æ„å»ºä¸€ä¸ªæ›´å¼ºå¤§ã€æ›´çµæ´»çš„è¯­éŸ³äº§å“ï¼Œé›†æˆ Amazon Alexa è¯­éŸ³æœåŠ¡ã€Google Assistant ç­‰åŠŸèƒ½ã€‚

ä¸ [ReSpeaker 2-Mics Pi HAT](https://www.seeedstudio.com/ReSpeaker-2-Mics-Pi-HAT-p-2874.html) ä¸åŒï¼Œè¿™æ¬¾æ‰©å±•æ¿åŸºäº AC108 å¼€å‘ï¼ŒAC108 æ˜¯ä¸€æ¬¾é«˜åº¦é›†æˆçš„å››é€šé“ ADCï¼Œå…·æœ‰ I2S/TDM è¾“å‡ºè½¬æ¢åŠŸèƒ½ï¼Œå¯å®ç°é«˜è´¨é‡è¯­éŸ³æ•æ‰ï¼Œä½¿è®¾å¤‡èƒ½å¤Ÿåœ¨ 3 ç±³åŠå¾„èŒƒå›´å†…æ‹¾å–å£°éŸ³ã€‚æ­¤å¤–ï¼Œè¿™æ¬¾ 4-Mics ç‰ˆæœ¬è¿˜é…å¤‡äº†ä¸€ä¸ªå¸¦æœ‰ 12 ä¸ª APA102 å¯ç¼–ç¨‹ LED çš„ LED ç¯ã€‚å€ŸåŠ©è¿™ 4 ä¸ªéº¦å…‹é£å’Œ LED ç¯ï¼ŒRaspberry Pi å¯ä»¥å®ç° VADï¼ˆè¯­éŸ³æ´»åŠ¨æ£€æµ‹ï¼‰ã€ä¼°ç®— DOAï¼ˆåˆ°è¾¾æ–¹å‘ï¼‰ã€æ‰§è¡Œ KWSï¼ˆå…³é”®è¯æœç´¢ï¼‰ï¼Œå¹¶é€šè¿‡ LED ç¯æ˜¾ç¤ºæ–¹å‘ï¼Œå°±åƒ Amazon Echo æˆ– Google Home ä¸€æ ·ã€‚

<iframe width="800" height="450" src="https://www.youtube.com/embed/IkSfBSf1IRo" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<div class="get_one_now_container" style={{textAlign: 'center'}}>
    <a class="get_one_now_item" href="https://www.seeedstudio.com/ReSpeaker-4-Mic-Array-for-Raspberry-Pi-p-2941.html"><strong><span><font color={'FFFFFF'} size={"4"}> ç«‹å³è´­ä¹° ğŸ–±ï¸</font></span></strong></a>
</div>

## ç‰¹æ€§

* å…¼å®¹ Raspberry Piï¼ˆæ”¯æŒ Raspberry Pi Zero å’Œ Zero Wã€Raspberry PiB+ã€Raspberry Pi 2Bã€Raspberry Pi 3Bã€Raspberry Pi 3B+ã€Raspberry Pi3 A+ å’Œ Raspberry Pi 4Bï¼‰
* 4 ä¸ªéº¦å…‹é£
* 3 ç±³åŠå¾„è¯­éŸ³æ•æ‰
* 2 ä¸ª Grove æ¥å£
* 12 ä¸ª APA102 ç”¨æˆ· LED
* è½¯ä»¶ç®—æ³•ï¼šVADï¼ˆè¯­éŸ³æ´»åŠ¨æ£€æµ‹ï¼‰ã€DOAï¼ˆåˆ°è¾¾æ–¹å‘ï¼‰å’Œ KWSï¼ˆå…³é”®è¯æœç´¢ï¼‰

æ³¨æ„ï¼šReSpeaker 4-Mic Array for Raspberry Pi ä¸Šæ²¡æœ‰éŸ³é¢‘è¾“å‡ºæ¥å£ï¼Œä»…ç”¨äºè¯­éŸ³æ•æ‰ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Raspberry Pi ä¸Šçš„ [è€³æœºæ’å­”](https://www.raspberrypi.org/documentation/configuration/audio-config.md) è¿›è¡ŒéŸ³é¢‘è¾“å‡ºã€‚

## åº”ç”¨åœºæ™¯

* è¯­éŸ³äº¤äº’åº”ç”¨
* AI åŠ©æ‰‹

## ç¡¬ä»¶æ¦‚è§ˆ

![](https://files.seeedstudio.com/wiki/ReSpeaker-4-Mic-Array-for-Raspberry-Pi/img/features.png)

* MICï¼š4 ä¸ªæ¨¡æ‹Ÿéº¦å…‹é£
* LEDï¼š12 ä¸ª APA102 å¯ç¼–ç¨‹ RGB LEDï¼Œè¿æ¥åˆ° SPI æ¥å£
* Raspberry Pi 40 é’ˆå¤´ï¼šå…¼å®¹ Raspberry Pi Zero å’Œ Zero Wã€Raspberry PiB+ã€Raspberry Pi 2Bã€Raspberry Pi 3Bã€Raspberry Pi 3B+ã€Raspberry Pi3 A+ å’Œ Raspberry Pi 4
* AC108ï¼šé«˜åº¦é›†æˆçš„å››é€šé“ ADCï¼Œå…·æœ‰ I2S/TDM è¾“å‡ºè½¬æ¢åŠŸèƒ½
* I2Cï¼šGrove I2C ç«¯å£ï¼Œè¿æ¥åˆ° I2C-1
* GPIO12ï¼šGrove æ•°å­—ç«¯å£ï¼Œè¿æ¥åˆ° GPIO12 å’Œ GPIO13

æ³¨æ„ï¼šå¦‚æœä½¿ç”¨ APA102 RGB LEDï¼Œè¯·ç¡®ä¿é¦–å…ˆå°† `GPIO5` è®¾ç½®ä¸º HIGHï¼Œä»¥å¯ç”¨ LED çš„ VCCã€‚

## å…¥é—¨æŒ‡å—

**å°† ReSpeaker 4-Mic Array è¿æ¥åˆ° Raspberry Pi**

å°† ReSpeaker 4-Mic Array å®‰è£…åˆ° Raspberry Pi ä¸Šï¼Œç¡®ä¿åœ¨å †å  ReSpeaker 4-Mic Array æ—¶é’ˆè„šæ­£ç¡®å¯¹é½ã€‚

æ³¨æ„ï¼šä¸å…è®¸çƒ­æ’æ‹” ReSpeaker 4-Mic Arrayï¼Œè¿™ä¼šæŸåè®¾å¤‡ã€‚

![è¿æ¥å›¾1](https://files.seeedstudio.com/wiki/ReSpeaker-4-Mic-Array-for-Raspberry-Pi/img/connect1.jpg)
![è¿æ¥å›¾2](https://files.seeedstudio.com/wiki/ReSpeaker-4-Mic-Array-for-Raspberry-Pi/img/connect2.jpg)

**å®‰è£…é©±åŠ¨**

ç¡®ä¿æ‚¨çš„ Raspberry Pi æ­£åœ¨è¿è¡Œ [æœ€æ–°çš„ Raspberry Pi OS](https://www.raspberrypi.org/downloads/raspbian/)ã€‚ï¼ˆ*æ›´æ–°äº 2021.06.30*ï¼‰

* ç¬¬ä¸€æ­¥ï¼šè·å– Seeed å£°å¡æºä»£ç ï¼Œå®‰è£…å¹¶é‡å¯ã€‚

```
sudo apt-get update
git clone https://github.com/HinTak/seeed-voicecard.git
cd seeed-voicecard
sudo ./install.sh
sudo reboot now
```

* ç¬¬äºŒæ­¥ï¼šç„¶ååœ¨ Raspberry Pi ä¸Šé€‰æ‹©éŸ³é¢‘è¾“å‡ºï¼š

```sh
sudo raspi-config
# é€‰æ‹© 1 ç³»ç»Ÿé€‰é¡¹
# é€‰æ‹© S2 éŸ³é¢‘
# é€‰æ‹©æ‚¨åå¥½çš„éŸ³é¢‘è¾“å‡ºè®¾å¤‡
# é€‰æ‹©å®Œæˆ
```

* ç¬¬ä¸‰æ­¥ï¼šæ£€æŸ¥å£°å¡åç§°æ˜¯å¦å¦‚ä¸‹æ‰€ç¤ºï¼š

```sh
pi@raspberrypi:~ $ arecord -L
null
    ä¸¢å¼ƒæ‰€æœ‰æ ·æœ¬ï¼ˆæ’­æ”¾ï¼‰æˆ–ç”Ÿæˆé›¶æ ·æœ¬ï¼ˆæ•è·ï¼‰
jack
    JACK éŸ³é¢‘è¿æ¥å·¥å…·åŒ…
pulse
    PulseAudio å£°éŸ³æœåŠ¡å™¨
default
playback
ac108
sysdefault:CARD=seeed4micvoicec
    seeed-4mic-voicecard,
    é»˜è®¤éŸ³é¢‘è®¾å¤‡
dmix:CARD=seeed4micvoicec,DEV=0
    seeed-4mic-voicecard,
    ç›´æ¥æ ·æœ¬æ··åˆè®¾å¤‡
dsnoop:CARD=seeed4micvoicec,DEV=0
    seeed-4mic-voicecard,
    ç›´æ¥æ ·æœ¬ç›‘å¬è®¾å¤‡
hw:CARD=seeed4micvoicec,DEV=0
    seeed-4mic-voicecard,
    æ— ä»»ä½•è½¬æ¢çš„ç›´æ¥ç¡¬ä»¶è®¾å¤‡
plughw:CARD=seeed4micvoicec,DEV=0
    seeed-4mic-voicecard,
    å¸¦æœ‰æ‰€æœ‰è½¯ä»¶è½¬æ¢çš„ç¡¬ä»¶è®¾å¤‡
usbstream:CARD=seeed4micvoicec
    seeed-4mic-voicecard
    USB æµè¾“å‡º
usbstream:CARD=ALSA
    bcm2835 ALSA
    USB æµè¾“å‡º
```

å¦‚æœæˆ‘ä»¬éœ€è¦æ›´æ”¹ `alsa` è®¾ç½®ï¼Œå¯ä»¥ä½¿ç”¨ `sudo alsactl --file=ac108_asound.state store` ä¿å­˜è®¾ç½®ã€‚å½“éœ€è¦å†æ¬¡ä½¿ç”¨è¿™äº›è®¾ç½®æ—¶ï¼Œå¯ä»¥å°†å…¶å¤åˆ¶åˆ°ï¼š`sudo cp ~/seeed-voicecard/ac108_asound.state /var/lib/alsa/asound.state`

* ç¬¬å››æ­¥ï¼šæ‰“å¼€ Audacityï¼Œé€‰æ‹© **AC108 & 4 channels** ä½œä¸ºè¾“å…¥ï¼Œé€‰æ‹© **bcm2835 alsa: - (hw:0:0)** ä½œä¸ºè¾“å‡ºè¿›è¡Œæµ‹è¯•ï¼š

```sh
sudo apt update
sudo apt install audacity
audacity                      // è¿è¡Œ Audacity
```

![](https://files.seeedstudio.com/wiki/ReSpeaker-4-Mic-Array-for-Raspberry-Pi/img/audacity.png)

* å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯ Lite Raspbian Pi OS é•œåƒä¸”æ²¡æœ‰ GUIï¼Œå¯ä»¥ä½¿ç”¨ `arecord` å½•éŸ³å¹¶ä½¿ç”¨ `aplay` æ’­æ”¾ï¼š

```
sudo apt-get install sox                             // ç”¨äºéŸ³é¢‘è½¬æ¢
arecord -Dac108 -f S32_LE -r 16000 -c 4 hello.wav    // ä»…æ”¯æŒ 4 é€šé“
sox hello.wav -c 2 stereo.wav                        // è½¬æ¢ä¸ºç«‹ä½“å£°
aplay stereo.wav                                      // ç¡®ä¿é»˜è®¤è®¾å¤‡
                                                     // éŸ³é¢‘å°†é€šè¿‡ Raspberry Pi çš„éŸ³é¢‘æ’å­”è¾“å‡º
```

## ä½¿ç”¨æ¦‚è¿°

è¦è¿è¡Œä»¥ä¸‹ç¤ºä¾‹ï¼Œè¯·å°† [4mics_hat ä»“åº“](https://github.com/respeaker/4mics_hat.git) å…‹éš†åˆ°æ‚¨çš„ Raspberry Pi ä¸Šï¼š

```
git clone https://github.com/respeaker/4mics_hat.git
```

æ‰€æœ‰åœ¨ä¸‹é¢ç¤ºä¾‹ä¸­æåˆ°çš„ Python è„šæœ¬éƒ½å¯ä»¥åœ¨æ­¤ä»“åº“ä¸­æ‰¾åˆ°ã€‚è¦å®‰è£…å¿…è¦çš„ä¾èµ–é¡¹ï¼Œè¯·åœ¨ mic_hat ä»“åº“æ–‡ä»¶å¤¹ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```
sudo apt-get install portaudio19-dev libatlas-base-dev
pip3 install -r requirements.txt
```

**APA102 LED**

æ¯ä¸ªæ¿è½½ APA102 LED éƒ½æœ‰ä¸€ä¸ªé¢å¤–çš„é©±åŠ¨èŠ¯ç‰‡ã€‚é©±åŠ¨èŠ¯ç‰‡è´Ÿè´£é€šè¿‡å…¶è¾“å…¥çº¿æ¥æ”¶æ‰€éœ€çš„é¢œè‰²ï¼Œå¹¶ä¿æŒè¯¥é¢œè‰²ç›´åˆ°æ¥æ”¶åˆ°æ–°çš„å‘½ä»¤ã€‚

![](https://files.seeedstudio.com/wiki/ReSpeaker-4-Mic-Array-for-Raspberry-Pi/img/rainbow.jpg)

* ç¬¬ä¸€æ­¥ï¼šæ¿€æ´» SPIï¼š

```bash
sudo raspi-config
```

1. é€‰æ‹© "Interfacing Options"
2. é€‰æ‹© "SPI"
3. é€‰æ‹©å¯ç”¨ SPI
4. æœ€åï¼Œé€€å‡ºå·¥å…·

* ç¬¬äºŒæ­¥ï¼šç„¶åè¿è¡Œç¤ºä¾‹ä»£ç ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥çœ‹åˆ° LED åƒ Alexa åŠ©æ‰‹ä¸€æ ·é—ªçƒã€‚

```bash
python3 interfaces/pixels.py
```

### ä½¿ç”¨ Python å½•åˆ¶å£°éŸ³

æˆ‘ä»¬ä½¿ç”¨ [PyAudio Python åº“](https://people.csail.mit.edu/hubert/pyaudio/) æ¥å½•åˆ¶å£°éŸ³ã€‚

é¦–å…ˆï¼Œè¿è¡Œä»¥ä¸‹è„šæœ¬ä»¥è·å– 2 Mic pi hat çš„è®¾å¤‡ç´¢å¼•å·ï¼š

```bash
python3 recording_examples/get_device_index.py
```

æ‚¨å°†çœ‹åˆ°å¦‚ä¸‹è®¾å¤‡ IDï¼š

```txt
Input Device id  2  -  seeed-4mic-voicecard: - (hw:1,0)
```

è¦å½•åˆ¶å£°éŸ³ï¼Œè¯·ä½¿ç”¨ nano æˆ–å…¶ä»–æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€ ```recording_examples/record.py``` æ–‡ä»¶ï¼Œå¹¶å°† `RESPEAKER_INDEX = 2` æ›´æ”¹ä¸ºæ‚¨ç³»ç»Ÿä¸­ ReSpeaker çš„ç´¢å¼•å·ã€‚ç„¶åè¿è¡Œ Python è„šæœ¬ record.py è¿›è¡Œå½•éŸ³ï¼š

```bash
python3 recording_examples/record.py
```

* ç¬¬å…­æ­¥ï¼šå¦‚æœæ‚¨æƒ³ä» 4 ä¸ªé€šé“ä¸­æå–é€šé“ 0 çš„æ•°æ®ï¼Œè¯·æŸ¥çœ‹ ```record_one_channel.py``` çš„å†…å®¹ã€‚å¯¹äºå…¶ä»–é€šé“ Xï¼Œè¯·å°† [0::4] æ›´æ”¹ä¸º [X::4]ã€‚

```bash
python3 recording_examples/record_one_channel.py
```

è¦æ’­æ”¾å½•åˆ¶çš„æ ·æœ¬ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ aplay ç³»ç»Ÿå·¥å…·ï¼Œä¾‹å¦‚ï¼š

```bash
aplay -f cd -Dhw:0 output.wav #ç”¨äºç«‹ä½“å£°
aplay -D plughw:0,0 output_one_channel.wav #ç”¨äºå•å£°é“çš„ä¸€ä¸ªé€šé“
```

## å®æ—¶å£°éŸ³æºå®šä½ä¸è·Ÿè¸ª

[ODAS](https://github.com/introlab/odas) æ˜¯ Open embeddeD Audition System çš„ç¼©å†™ã€‚è¿™æ˜¯ä¸€ä¸ªä¸“é—¨ç”¨äºæ‰§è¡Œå£°éŸ³æºå®šä½ã€è·Ÿè¸ªã€åˆ†ç¦»å’Œåè¿‡æ»¤çš„åº“ã€‚

* ç¬¬ä¸€æ­¥ï¼šè·å– [ODAS](https://github.com/introlab/odas.git) å¹¶æ„å»ºå®ƒã€‚

å¯æ‰§è¡Œæ–‡ä»¶å°†åœ¨ bin ç›®å½•ä¸­ç”Ÿæˆï¼š

```bash
sudo apt-get install libfftw3-dev libconfig-dev libasound2-dev libgconf-2-4
sudo apt-get install cmake
cd ~/Desktop
git clone https://github.com/introlab/odas.git
mkdir odas/build
cd odas/build
cmake ..
make
```

* ç¬¬äºŒæ­¥ï¼šè·å– [ODAS Studio](https://github.com/introlab/odas_web) å¹¶è¿è¡Œå®ƒã€‚

å®‰è£… nodejs v12.22 å’Œ npm 6.14ï¼š

```bash
sudo apt update
sudo apt -y install curl dirmngr apt-transport-https lsb-release ca-certificates
curl -sL https://deb.nodesource.com/setup_12.x | sudo -E bash -
```

ç¡®ä¿å®‰è£…äº†ç›¸å…³çš„ç¼–è¯‘å·¥å…·ï¼š

```bash
sudo apt -y install gcc g++ make
sudo apt -y install nodejs
```

ä½¿ç”¨ npm å®‰è£… odas_web çš„ä¾èµ–é¡¹ï¼š

```bash
cd ~/Desktop
git clone https://github.com/introlab/odas_web
cd odas_web
npm install
```

æˆ‘ä»¬çš„ç›®æ ‡æ˜¯å®‰è£…ç›¸å…³çš„ä¾èµ–æ¨¡å—è€Œæ— éœ€é‡æ–°æ„å»ºï¼Œå› æ­¤å¯ä»¥å¿½ç•¥é‡å»ºæœŸé—´çš„é”™è¯¯ã€‚ç„¶åè¿è¡Œ npm startï¼š

```bash
npm start
```

æˆ–è€…æˆ‘ä»¬å¯ä»¥å°† Python é™çº§åˆ° 2.7 æ¥æ„å»ºæ—§çš„ election-rebuild æ¨¡å—ã€‚ï¼ˆæ­¤æ­¥éª¤å¯ä»¥è·³è¿‡ï¼‰

```bash
sudo apt remove python3 -y
sudo apt install python2 -y
```

* ç¬¬ä¸‰æ­¥ï¼šodascore ä½äº **~/Desktop/odas/build/bin/odaslive**ï¼Œé…ç½®æ–‡ä»¶ä½äº **~/Desktop/odas/config/odaslive/respeaker_4_mic_array.cfg**ã€‚

æˆ‘ä»¬éœ€è¦ä¿®æ”¹é…ç½®ä»¥å°†å£°å¡æŒ‡å®šä¸ºæˆ‘ä»¬çš„è®¾å¤‡ï¼š

```bash
arecord -l  #è¿è¡Œæ­¤å‘½ä»¤ç¡®ä¿å·²å®‰è£… arecord
```

æ‚¨å°†çœ‹åˆ°ç±»ä¼¼ä»¥ä¸‹çš„è¾“å‡ºï¼š

```bash
pi@raspberrypi:~/Desktop/odas/config/odaslive $ arecord -l
**** List of CAPTURE Hardware Devices ****
card 3: seeed4micvoicec [seeed-4mic-voicecard], device 0: bcm2835-i2s-ac10x-codec0 ac10x-codec0-0 [bcm2835-i2s-ac10x-codec0 ac10x-codec0-0]
  Subdevices: 1/1
  Subdevice #0: subdevice #0
```

åœ¨é…ç½®æ–‡ä»¶çš„ç¬¬ 18 è¡Œæ›´æ”¹å£°å¡æŒ‡å®šï¼š

```bash
vim ~/Desktop/odas/config/odaslive/respeaker_4_mic_array.cfg
# ç„¶åè¾“å…¥ :18
# æŒ‰ Enter
# æŒ‰ i
# æ›´æ”¹ card = YOUR CARD ;  # æˆ‘ä»¬åœ¨ "arecord -l" ä¸­æ‰¾åˆ°çš„
# æˆ‘çš„é…ç½®ä¸ºï¼š
# card = 3 ;
# ç„¶åè¾“å…¥ :wq  # ä¿å­˜é…ç½®æ–‡ä»¶
```

ç„¶åæˆ‘ä»¬æ‰“å¼€ odas çš„ Web ç•Œé¢ï¼Œåœ¨ **Local System Monitor** ç•Œé¢ä¸­å¯ä»¥çœ‹åˆ°ç³»ç»Ÿç›‘æ§æ•°æ®ï¼Œå¹¶åœ¨ **ODAS Control** ç•Œé¢ä¸­é€‰æ‹©æ§åˆ¶æ ¸å¿ƒå’Œè¯»å–çš„é…ç½®æ–‡ä»¶ã€‚

å¯åŠ¨ odas Web GUIï¼š

```bash
cd ~/Desktop/odas_web
npm start
```

ç‚¹å‡» **ODAS Core** ä¸‹çš„ç©ºç™½éƒ¨åˆ†ä»¥è°ƒå‡ºæ–‡ä»¶æµè§ˆå™¨ï¼Œå¹¶é€‰æ‹©æ ¸å¿ƒè·¯å¾„ä¸º "~/Desktop/odas/build/bin/odaslive"ã€‚

ç‚¹å‡» **ODAS Config** ä¸‹çš„ç©ºç™½éƒ¨åˆ†ä»¥è°ƒå‡ºæ–‡ä»¶æµè§ˆå™¨ï¼Œå¹¶é€‰æ‹©é…ç½®è·¯å¾„ä¸º "~/Desktop/odas/config/odaslive/respeaker_4_mic_array.cfg"ã€‚

æ­£ç¡®é…ç½®åå°†å¦‚ä¸‹æ‰€ç¤ºï¼š

![](https://files.seeedstudio.com/wiki/ReSpeaker-4-Mic-Array-for-Raspberry-Pi/img/odas.png)

## åœ¨è¾¹ç¼˜å¯ç”¨è¯­éŸ³è¯†åˆ«åŠŸèƒ½ï¼šPicovoice

<div align="center"><img width ="{700}" src="https://files.seeedstudio.com/wiki/ReSpeaker_4_Mic_Array_for_Raspberry_Pi/banner.gif"/></div>

[**Picovoice**](https://picovoice.ai/) **å¸®åŠ©ä¼ä¸šå¿«é€Ÿåˆ›æ–°å¹¶é€šè¿‡ç§æœ‰è¯­éŸ³ AI å®ç°å·®å¼‚åŒ–**ã€‚åˆ©ç”¨æˆ‘ä»¬çš„è¯­éŸ³è¯†åˆ«å’Œ [**è‡ªç„¶è¯­è¨€ç†è§£ (NLU) æŠ€æœ¯**](https://searchenterpriseai.techtarget.com/definition/natural-language-understanding-NLU)ï¼Œå›´ç»•æ‚¨çš„å“ç‰Œå’Œäº§å“æ„å»ºç»Ÿä¸€çš„ AI ç­–ç•¥ã€‚

**Seeed å·²ä¸ Picovoice åˆä½œï¼Œä¸ºå¼€å‘è€…æä¾›åŸºäº [ReSpeaker 4 Mic](https://www.seeedstudio.com/ReSpeaker-4-Mic-Array-for-Raspberry-Pi.html) çš„è¾¹ç¼˜è¯­éŸ³è¯†åˆ«è§£å†³æ–¹æ¡ˆã€‚**

Picovoice æ˜¯ä¸€ä¸ªç«¯åˆ°ç«¯çš„å¹³å°ï¼Œå¯æ ¹æ®æ‚¨çš„éœ€æ±‚æ„å»ºè¯­éŸ³äº§å“ã€‚å®ƒæ”¯æŒåˆ›å»ºç±»ä¼¼ Alexa å’Œ Google çš„è¯­éŸ³ä½“éªŒï¼Œä½†å®Œå…¨åœ¨è®¾å¤‡ä¸Šè¿è¡Œã€‚Picovoice çš„ä¼˜åŠ¿åŒ…æ‹¬ï¼š

* **éšç§ä¿æŠ¤**ï¼šæ‰€æœ‰å¤„ç†å‡ç¦»çº¿å®Œæˆï¼Œå¤©ç„¶ç¬¦åˆ HIPAA å’Œ GDPR æ ‡å‡†ã€‚
* **å¯é æ€§**ï¼šæ— éœ€æŒç»­ç½‘ç»œè¿æ¥å³å¯è¿è¡Œã€‚
* **é›¶å»¶è¿Ÿ**ï¼šè¾¹ç¼˜ä¼˜å…ˆæ¶æ„æ¶ˆé™¤äº†ä¸å¯é¢„æµ‹çš„ç½‘ç»œå»¶è¿Ÿã€‚
* **é«˜å‡†ç¡®æ€§**ï¼šå¯¹å™ªå£°å’Œæ··å“å…·æœ‰å¼ºå¤§çš„æŠ—å¹²æ‰°èƒ½åŠ›ï¼Œæ€§èƒ½è¿œè¶…åŸºäºäº‘çš„æ›¿ä»£æ–¹æ¡ˆã€‚
* **è·¨å¹³å°**ï¼šä¸€æ¬¡è®¾è®¡ï¼Œéšå¤„éƒ¨ç½²ã€‚ä½¿ç”¨ç†Ÿæ‚‰çš„è¯­è¨€å’Œæ¡†æ¶è¿›è¡Œæ„å»ºã€‚

### ä½¿ç”¨ ReSpeaker 4-Mic Array æ­é… Picovoice å…¥é—¨æŒ‡å—

**æ­¥éª¤ 1.** è¯·å…ˆå®Œæˆ **ä¸Šè¿°å…³äº ReSpeaker 4-Mic Array ä¸ Raspberry Pi çš„åˆ†æ­¥æ•™ç¨‹**ã€‚

**æ³¨æ„ï¼š** è¯·ç¡®ä¿ `Audacity` å’Œ `APA102` LED åœ¨ ReSpeaker 4-Mic Array ä¸ Raspberry Pi ä¸Šæ­£å¸¸å·¥ä½œã€‚

**æ­¥éª¤ 2.** æ‰“å¼€ç»ˆç«¯å¹¶è¾“å…¥ä»¥ä¸‹å‘½ä»¤å®‰è£… `pyaudio` é©±åŠ¨ã€‚

```sh
pip3 install pyaudio
```

**æ³¨æ„ï¼š** è¯·ç¡®ä¿æ‚¨çš„ Raspberry Pi ä¸Šå·²å®‰è£… `pip3`

**æ­¥éª¤ 3.** åœ¨ç»ˆç«¯ä¸­è¾“å…¥ä»¥ä¸‹å‘½ä»¤ä»¥ **å®‰è£…é€‚ç”¨äº ReSpeaker 4-Mic Array çš„ Picovoice æ¼”ç¤ºç¨‹åº**ã€‚

```sh
pip3 install pvrespeakerdemo
```

### æ¼”ç¤ºä½¿ç”¨æ–¹æ³•

è¯¥æ¼”ç¤ºåˆ©ç”¨ Raspberry Pi ä¸Šçš„ ReSpeaker 4-Mic Array å’Œ Picovoice æŠ€æœ¯æ¥æ§åˆ¶ LEDã€‚**æ­¤æ¼”ç¤ºé€šè¿‡å”¤é†’è¯ "`Picovoice`" è§¦å‘ï¼Œå¹¶å‡†å¤‡æ‰§è¡Œåç»­æ“ä½œï¼Œä¾‹å¦‚æ‰“å¼€å’Œå…³é—­ LEDï¼Œä»¥åŠæ›´æ”¹ LED é¢œè‰²ã€‚**

å®‰è£…å®Œæˆåï¼Œåœ¨ç»ˆç«¯ä¸­è¾“å…¥ä»¥ä¸‹å‘½ä»¤è¿è¡Œæ¼”ç¤ºï¼š

```sh
picovoice_respeaker_demo
```

### è¯­éŸ³å‘½ä»¤

ä»¥ä¸‹æ˜¯æ­¤æ¼”ç¤ºçš„è¯­éŸ³å‘½ä»¤ï¼š

* **Picovoice**

æ¼”ç¤ºè¾“å‡ºï¼š

```txt
wake word
```

* **Turn on the lights**

æ‚¨åº”è¯¥çœ‹åˆ°ç¯å…‰æ‰“å¼€ï¼Œå¹¶åœ¨ç»ˆç«¯ä¸­æ˜¾ç¤ºä»¥ä¸‹æ¶ˆæ¯ï¼š

```config
{
    is_understood : 'true',
    intent : 'turnLights',
    slots : {
        'state' : 'on',
    }
}
```

ç»ˆç«¯ä¸­æ˜¾ç¤ºçš„å‘½ä»¤åˆ—è¡¨å¦‚ä¸‹ï¼š

```config
context:
  expressions:
    turnLights:
      - "[switch, turn] $state:state (all) (the) [light, lights]"
      - "[switch, turn] (all) (the) [light, lights] $state:state"
    changeColor:
      - "[change, set, switch] (all) (the) (light, lights) (color) (to) $color:color"
  slots:
    state:
      - "off"
      - "on"
    color:
      - "blue"
      - "green"
      - "orange"
      - "pink"
      - "purple"
      - "red"
      - "white"
      - "yellow"
```

æ­¤å¤–ï¼Œæ‚¨å¯ä»¥å°è¯•ä»¥ä¸‹å‘½ä»¤æ›´æ”¹é¢œè‰²ï¼š

* **Picovoice, set the lights to orange**

å…³é—­ç¯å…‰ï¼š

* **Picovoice, turn off all lights**

**æ¼”ç¤ºè§†é¢‘å±•ç¤º**

<p style={{textAlign: 'center'}}><iframe width={720} height={480} src="https://www.youtube.com/embed/icTZeMIJAxw" frameBorder={0} allow="accelerometer; encrypted-media;gyroscope; picture-in-picture" allowFullScreen /></p>

### æ¼”ç¤ºæºä»£ç 

è¯¥æ¼”ç¤ºåŸºäº **[Picovoice SDK](https://github.com/Picovoice/picovoice)** æ„å»ºã€‚æ¼”ç¤ºæºä»£ç å¯åœ¨ GitHub ä¸Šæ‰¾åˆ°ï¼š[Picovoice Respeaker Demo](https://github.com/Picovoice/picovoice/tree/master/demo/respeaker)

### ä¸åŒçš„å”¤é†’è¯

[**Picovoice SDK**](https://github.com/Picovoice/picovoice) åŒ…å«å…è´¹æ ·æœ¬å”¤é†’è¯ï¼Œé‡‡ç”¨ Apache 2.0 è®¸å¯ï¼ŒåŒ…æ‹¬ä¸»è¦è¯­éŸ³åŠ©æ‰‹ï¼ˆä¾‹å¦‚ "**`Hey Google`**"ã€"**`Alexa`**"ï¼‰ä»¥åŠæœ‰è¶£çš„å”¤é†’è¯ï¼ˆä¾‹å¦‚ "**`Computer`**" å’Œ "**`Jarvis`**"ï¼‰ã€‚

### è‡ªå®šä¹‰è¯­éŸ³å‘½ä»¤

ç¯å…‰å‘½ä»¤ç”± Picovoice çš„ *Speech-to-Intent context* å®šä¹‰ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ Picovoice Console è¾“å…¥å…è®¸çš„è¯­æ³•æ¥è®¾è®¡å’Œè®­ç»ƒä¸Šä¸‹æ–‡ã€‚é€šè¿‡éº¦å…‹é£æŒ‰é’®åœ¨æµè§ˆå™¨ä¸­ç¼–è¾‘æ—¶æµ‹è¯•æ‚¨çš„æ›´æ”¹ã€‚è®¿é—® [Picovoice Console](https://picovoice.ai/console/) å¹¶æ³¨å†Œè´¦æˆ·ã€‚ä½¿ç”¨ **Rhino Speech-to-Intent ç¼–è¾‘å™¨** åˆ›å»ºä¸Šä¸‹æ–‡ï¼Œç„¶åä¸º Raspberry Pi è®­ç»ƒå®ƒä»¬ã€‚

<div align="center"><img width ="{700}" src="https://files.seeedstudio.com/wiki/ReSpeaker_4_Mic_Array_for_Raspberry_Pi/respeaker_demo_console_edit.gif"/></div>

### å¤šå”¤é†’è¯ç¤ºä¾‹

<p style={{textAlign: 'center'}}><iframe width={720} height={480} src="https://www.youtube.com/embed/Dfn3wBE2pwY" frameBorder={0} allow="accelerometer; encrypted-media; gyroscope; picture-in-picture" allowFullScreen /></p>

ä¸ºäº†å±•ç¤º Picovoice çš„èƒ½åŠ›ï¼Œæˆ‘ä»¬è¿˜å‡†å¤‡äº†ä½¿ç”¨ ReSpeaker 4-Mic Array å’Œ Raspberry Pi çš„å¤šå”¤é†’è¯ç¤ºä¾‹ï¼ä¸åŒçš„å”¤é†’è¯å¯ä»¥è®¾ç½®ä¸ºæ‰§è¡Œç‰¹å®šä»»åŠ¡ã€‚

*æ­¤åŒ…åŒ…å«ä¸€ä¸ªå‘½ä»¤è¡Œæ¼”ç¤ºï¼Œç”¨äºä½¿ç”¨ Porcupine æ§åˆ¶ ReSpeaker 4-Mic éº¦å…‹é£é˜µåˆ—çš„ LEDã€‚*

### Porcupine

**Porcupine** æ˜¯ä¸€ä¸ªé«˜ç²¾åº¦ä¸”è½»é‡çº§çš„å”¤é†’è¯å¼•æ“ã€‚å®ƒæ”¯æŒæ„å»ºå§‹ç»ˆç›‘å¬çš„è¯­éŸ³åº”ç”¨ç¨‹åºã€‚å…¶ç‰¹ç‚¹åŒ…æ‹¬ï¼š

* ä½¿ç”¨åœ¨çœŸå®ç¯å¢ƒä¸­è®­ç»ƒçš„æ·±åº¦ç¥ç»ç½‘ç»œã€‚
* ç´§å‡‘ä¸”è®¡ç®—æ•ˆç‡é«˜ï¼Œéå¸¸é€‚åˆç‰©è”ç½‘ã€‚
* è·¨å¹³å°æ”¯æŒã€‚æ”¯æŒ Raspberry Piã€BeagleBoneã€Androidã€iOSã€Linux (x86_64)ã€macOS (x86_64)ã€Windows (x86_64) å’Œç½‘é¡µæµè§ˆå™¨ã€‚æ­¤å¤–ï¼Œä¼ä¸šå®¢æˆ·è¿˜å¯ä»¥è®¿é—® ARM Cortex-M SDKã€‚
* å¯æ‰©å±•æ€§å¼ºã€‚å¯ä»¥æ£€æµ‹å¤šä¸ªå§‹ç»ˆç›‘å¬çš„è¯­éŸ³å‘½ä»¤ï¼Œè€Œä¸ä¼šå¢åŠ è¿è¡Œæ—¶å¼€é”€ã€‚
* è‡ªåŠ©æœåŠ¡ã€‚å¼€å‘è€…å¯ä»¥ä½¿ç”¨ [Picovoice Console](https://picovoice.ai/console/) è®­ç»ƒè‡ªå®šä¹‰å”¤é†’è¯æ¨¡å‹ã€‚

#### å¤šå”¤é†’è¯å…¥é—¨

åœ¨ç»ˆç«¯ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤ä»¥å®‰è£…æ¼”ç¤ºé©±åŠ¨ï¼š

```sh
pip3 install ppnrespeakerdemo
```

#### å¤šå”¤é†’è¯ä½¿ç”¨æ–¹æ³•

åœ¨å®‰è£…é©±åŠ¨åï¼Œåœ¨ç»ˆç«¯ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```sh
porcupine_respeaker_demo
```

ç­‰å¾…æ¼”ç¤ºåˆå§‹åŒ–å¹¶åœ¨ç»ˆç«¯ä¸­æ‰“å° `[Listening]`ã€‚ç„¶åè¯´ï¼š

> Picovoice

æ¼”ç¤ºè¾“å‡ºï¼š

```text
detected 'Picovoice'
```

ç¯å…‰ç°åœ¨è®¾ç½®ä¸º `ç»¿è‰²`ã€‚ç„¶åè¯´ï¼š

> Alexa

ç¯å…‰ç°åœ¨è®¾ç½®ä¸º `é»„è‰²`ã€‚ç„¶åè¯´ï¼š

> Terminator

ä»¥å…³é—­ç¯å…‰ã€‚

#### å”¤é†’è¯ä¸é¢œè‰²

ä»¥ä¸‹æ˜¯ä¸æ­¤æ¼”ç¤ºæ”¯æŒçš„å”¤é†’è¯ç›¸å…³è”çš„é¢œè‰²ï¼š

* ![#ffff33](https://via.placeholder.com/15/ffff33/000000?text=+) `Alexa`
* ![#ff8000](https://via.placeholder.com/15/ff8000/000000?text=+) `Bumblebee`
* ![#ffffff](https://via.placeholder.com/15/ffffff/000000?text=+) `Computer`
* ![#ff0000](https://via.placeholder.com/15/ff0000/000000?text=+) `Hey Google`
* ![#800080](https://via.placeholder.com/15/800080/000000?text=+) `Hey Siri`
* ![#ff3399](https://via.placeholder.com/15/ff3399/000000?text=+) `Jarvis`
* ![#00ff00](https://via.placeholder.com/15/00ff00/000000?text=+) `Picovoice`
* ![#0000ff](https://via.placeholder.com/15/0000ff/000000?text=+) `Porcupine`
* ![#000000](https://via.placeholder.com/15/000000/000000?text=+) `Terminator`

#### å¤šå”¤é†’è¯ç¤ºä¾‹æºä»£ç 

è¯·æŸ¥çœ‹æ­¤ç¤ºä¾‹çš„å®Œæ•´æºä»£ç ï¼š[Porcupine Respeaker Demo](https://github.com/Picovoice/porcupine/tree/master/demo/respeaker)

### PicovoiceæŠ€æœ¯æ”¯æŒ

å¦‚æœæ‚¨åœ¨ä½¿ç”¨Picovoiceæ—¶é‡åˆ°æŠ€æœ¯é—®é¢˜ï¼Œè¯·è®¿é—® **[Picovoice](https://github.com/Picovoice)** è¿›è¡Œè®¨è®ºã€‚

## å¸¸è§é—®é¢˜

**Q1: è¿è¡Œ `kws_doa.py` å¹¶è¯´ `snow boy` æ—¶æ²¡æœ‰å“åº”**

A2: è¯·è¿è¡Œ Audacity ç¡®ä¿4ä¸ªé€šé“æ­£å¸¸å·¥ä½œã€‚å¦‚æœæœ‰ä¸€ä¸ªé€šé“æ²¡æœ‰æ•°æ®ï¼Œå½“æˆ‘ä»¬è¯´ `snow boy` æ—¶å°†ä¸ä¼šæœ‰å“åº”ã€‚

**Q2: è¿è¡Œ `sudo pip install pyaudio` æ—¶å‡ºç° `#include "portaudio.h"` é”™è¯¯**

A3: è¯·è¿è¡Œä»¥ä¸‹å‘½ä»¤è§£å†³é—®é¢˜ï¼š

```sh
sudo apt-get install portaudio19-dev
```

**Q3: åœ¨ `journalctl` ä¸­å‡ºç° `...WARNING: memory leak will occur if overlay removed...` æ¶ˆæ¯**

A4: åœ¨é©±åŠ¨é¦–æ¬¡åŠ è½½ï¼ˆå¯åŠ¨åï¼‰æ—¶ç¡®å®ä¼šå‡ºç°ä¸€æ¬¡æ€§çš„å°å†…å­˜æŸå¤±ã€‚ç„¶è€Œï¼Œç”±äºè¿™æ˜¯æ¯æ¬¡å¯åŠ¨æˆ–åŠ è½½æ—¶å‘ç”Ÿçš„æƒ…å†µï¼Œè€Œå…¸å‹ç”¨æˆ·æ¯æ¬¡å¯åŠ¨åªéœ€åŠ è½½ä¸€æ¬¡é©±åŠ¨ï¼Œå› æ­¤æ¯æ¬¡å¯åŠ¨ä¸¢å¤±å‡ å­—èŠ‚å†…å­˜å¹¶ä¸ä¼šäº§ç”Ÿå½±å“ã€‚å› æ­¤ï¼Œè¿™åªæ˜¯ä¸€ä¸ªå°é—®é¢˜ï¼Œä¸å¤ªå¯èƒ½å¯¹ç”¨æˆ·äº§ç”Ÿå®é™…å½±å“ï¼Œé™¤äº†çœ‹åˆ°æœ‰å…³æ¯æ¬¡å¯åŠ¨å†…å­˜æŸå¤±çš„è­¦å‘Šæ¶ˆæ¯ã€‚

## èµ„æº

* **[PDF]** [ReSpeaker 4-Mic Array for Raspberry Pi(PDF)](https://files.seeedstudio.com/wiki/ReSpeaker-4-Mic-Array-for-Raspberry-Pi/src/ReSpeaker%204-Mic%20Array%20for%20Raspberry%20Pi%20%20v1.0.pdf)
* **[DXF]** [ReSpeaker 4-Mic Array for Raspberry Pi v1.0](https://files.seeedstudio.com/wiki/ReSpeaker-4-Mic-Array-for-Raspberry-Pi/src/ReSpeaker%204-Mic%20Array%20for%20Raspberry%20Pi%20v1.0.dxf.zip)
* **[3D]** [ReSpeaker 4-Mic Array for Raspberry Pi v1.0 3D Model](https://files.seeedstudio.com/wiki/ReSpeaker-4-Mic-Array-for-Raspberry-Pi/src/ReSpeaker%204-Mics%20Pi%20HAT%20v1.0.skp.zip)
* **[AC108]** [AC108æ•°æ®è¡¨](http://www.x-powers.com/en.php/Info/product_detail/article_id/41)
* **[é©±åŠ¨]** [Seeed-Voice Driver](https://github.com/respeaker/seeed-voicecard)
* **[ç®—æ³•]** [ç®—æ³•åŒ…æ‹¬DOAã€VADã€NS](https://github.com/respeaker/mic_array)
* **[è¯­éŸ³å¼•æ“]** [è¯­éŸ³å¼•æ“é¡¹ç›®ï¼Œæä¾›åˆ›å»ºè¯­éŸ³å¯ç”¨å¯¹è±¡çš„æ„å»ºæ¨¡å—](https://github.com/voice-engine/voice-engine)
* **[ç®—æ³•]** [AEC](https://github.com/voice-engine/ec)

## æŠ€æœ¯æ”¯æŒä¸äº§å“è®¨è®º

æ„Ÿè°¢æ‚¨é€‰æ‹©æˆ‘ä»¬çš„äº§å“ï¼æˆ‘ä»¬è‡´åŠ›äºä¸ºæ‚¨æä¾›å„ç§æ”¯æŒï¼Œä»¥ç¡®ä¿æ‚¨ä½¿ç”¨æˆ‘ä»¬çš„äº§å“æ—¶èƒ½å¤Ÿè·å¾—å°½å¯èƒ½é¡ºç•…çš„ä½“éªŒã€‚æˆ‘ä»¬æä¾›å¤šç§æ²Ÿé€šæ¸ é“ï¼Œä»¥æ»¡è¶³ä¸åŒçš„åå¥½å’Œéœ€æ±‚ã€‚

<div class="button_tech_support_container">
<a href="https://forum.seeedstudio.com/" class="button_forum"></a> 
<a href="https://www.seeedstudio.com/contacts" class="button_email"></a>
</div>

<div class="button_tech_support_container">
<a href="https://discord.gg/eWkprNDMU7" class="button_discord"></a> 
<a href="https://github.com/Seeed-Studio/wiki-documents/discussions/69" class="button_discussion"></a>
</div>
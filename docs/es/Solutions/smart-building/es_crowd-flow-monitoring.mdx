---
description: "¿Quieres visualizar el flujo de personas en un espacio? Puedes lograrlo fácilmente con Home Assistant combinado con un mapa de calor de plano de planta. Esta solución te permite superponer datos de horas-persona en un plano de planta, brindándote una comprensión instantánea de la utilización del espacio."
keywords:
    - Home Assistant
    - Estadísticas de flujo
    - mapa de calor
image: https://files.seeedstudio.com/wiki/solution/application/ha-heatmap/result_visualize.png
slug: /es/crowd-flow-monitoring
sidebar_position: 4
last_update:
  date: 08/11/2025
  author: Spencer
---

import Steppers from '@site/src/components/utils/Stepper';

# Mapa de Calor de Flujo de Multitudes con Home Assistant

¿Quieres una vista clara de cómo se mueven las personas a través de un espacio? Con **Home Assistant** y un **Mapa de Calor de Plano de Planta**, puedes hacer exactamente eso. Esta solución te permite superponer datos de horas-persona en tu plano de planta, facilitando ver cómo se está utilizando el espacio de un vistazo.

Home Assistant no solo recopila y gestiona datos de varios dispositivos, sino que también se conecta sin problemas con otras plataformas a través de sus potentes características de integración. Al integrar un plugin de mapa de calor, puedes **usar directamente los datos de dispositivos existentes.** Si tus dispositivos ya están conectados a Home Assistant, puedes incorporar fácilmente sus datos en un gráfico visual. Esto simplifica el proceso de configuración y maximiza la utilidad de tu ecosistema de hogar inteligente existente.

:::note

Un Mapa de Calor de Plano de Planta es una técnica que visualiza datos sobre un plano de planta de edificio o diseño interior. Utiliza una escala de colores desde fríos (como azul, verde) hasta cálidos (como amarillo, rojo) para mostrar la intensidad, densidad o frecuencia de datos en áreas específicas. Por ejemplo, puede mostrar con qué frecuencia se ocupa una habitación o la distribución de temperatura en un área particular.

:::

<div align="center">
  <img class='img-responsive' width="480" src="https://files.seeedstudio.com/wiki/solution/application/ha-heatmap/result_visualize.png" alt="Visualización de Mapa de Calor"/>
</div>

## Ejemplo de Estadísticas de Horas-Persona

Necesitarás:

- Una plataforma Node-RED
- Un sistema Home Assistant
- Un kit de cámara [Grove Vision AI V2](https://www.seeedstudio.com/XIAO-Vision-AI-Camera-p-6450.html)

### Grove Vision AI V2

1. Ve a la plataforma [SenseCraft AI](https://sensecraft.seeed.cc/), inicia sesión, y bajo "Vision Workspace", haz clic en "Grove Vision AI V2" y selecciona **Connect**.
2. En la ventana emergente, elige el dispositivo Grove Vision AI V2 que quieres conectar.

<div align="center">
  <img class='img-responsive' width="480" src="https://files.seeedstudio.com/wiki/solution/application/ha-heatmap/connect-grove-vision-v2.png" alt="Conectar Grove Vision V2"/>
</div>

### Flashear el Modelo

Selecciona un modelo apropiado. Si no estás haciendo detección de rostros o personas, podrías necesitar flashear un modelo que pueda reconocer características humanas. Por ejemplo, selecciona **Face Detection** y confirma para desplegarlo.

<div align="center">
  <img class='img-responsive' width="480" src="https://files.seeedstudio.com/wiki/solution/application/ha-heatmap/sensecraft-model-face-detection.png" alt="Detección de Rostros del Modelo SenseCraft AI"/>
</div>

Haz doble clic en el modelo y confirma para flashearlo y desplegarlo.

### Configurar Información de Red

1. En el panel principal, haz clic en **Network Configuration** a la derecha.
2. Ingresa la información Wi-Fi de tu Home Assistant y la dirección del servidor MQTT (usualmente *dirección HA*:1883).
3. Haz clic en **Save**.

:::note

Asegúrate de anotar el Client ID (puedes personalizarlo) para uso posterior.

:::

<div align="center">
  <img class='img-responsive' width="480" src="https://files.seeedstudio.com/wiki/solution/application/ha-heatmap/sensecraft-wifi-configuration.png" alt="Configuración Wi-Fi de SenseCraft"/>
</div>

## Node-RED

Dado que el Grove Vision AI V2 es un dispositivo no estándar, actualmente necesitamos usar Node-RED para manejar el registro del dispositivo y la visualización de datos.

Primero, necesitas importar el archivo [person-hour-statistics.json](https://files.seeedstudio.com/wiki/solution/application/ha-heatmap/vision-v2-crowd-flow.json) en Node-RED, luego continúa con los pasos siguientes:

<Steppers>

### Confirmar Configuración MQTT

Modifica la información del servicio en el nodo "**Publish HA Data & Discovery**" a tu dirección de Home Assistant (ej., `192.168.101.160`). Si estás usando el complemento Node-RED integrado en Home Assistant, conéctate a `mqtt://localhost`.

<div align="center">
  <img class='img-responsive' width="480" src="https://files.seeedstudio.com/wiki/solution/application/ha-heatmap/nodered-mqtt-out-config.png" alt="Configuración MQTT Out de Node-RED"/>
</div>

### Modificar ID del Dispositivo

En el nodo "**Know Camera IDs**", modifica el JSON del payload y agrega múltiples client IDs si tienes más de un dispositivo.

<div align="center">
  <img class='img-responsive' width="480" src="https://files.seeedstudio.com/wiki/solution/application/ha-heatmap/nodered-heatmap-device-ids.png" alt="IDs de Dispositivo del Mapa de Calor de Node-RED"/>
</div>

### Registrar Dispositivo

Haz clic en "**Trigger HA Discovery for Known Devices**" para registrar el dispositivo. Luego deberías ver una entidad de dispositivo no disponible en la página de resumen.

<div align="center">
  <img class='img-responsive' width="480" src="https://files.seeedstudio.com/wiki/solution/application/ha-heatmap/ha-heatmap-device-added.png" alt="Dispositivo de Mapa de Calor Agregado en Home Assistant"/>
</div>

### Ver Datos

Establece el `msg.topic` del nodo "**Start**" a `grove_vision_ai_v2_61003e7c`, luego haz clic en **Start**. Una vez hecho, puedes ver los datos en Home Assistant.

<div align="center">
  <img class='img-responsive' width="480" src="https://files.seeedstudio.com/wiki/solution/application/ha-heatmap/ha-heatmap-device-worked.png" alt="Dispositivo de Mapa de Calor Funcionando en Home Assistant"/>
</div>

</Steppers>

## Home Assistant

### Instalar Plugin (HACS)

Ve a tu página HACS, por ejemplo, [http://homeassistant.local:8123/hacs/dashboard](http://homeassistant.local:8123/hacs/dashboard):

<div align="center">
  <img class='img-responsive' width="480" src="https://files.seeedstudio.com/wiki/solution/application/ha-heatmap/hacs-custom-repositories.png" alt="Repositorios Personalizados de HACS"/>
</div>

En HACS, agrega un `Custom repository` e ingresa la siguiente dirección:

```shell
https://github.com/Seeed-Solution/lovelace-heatmap-card
```

<div align="center">
  <img class='img-responsive' width="480" src="https://files.seeedstudio.com/wiki/solution/application/ha-heatmap/hacs-add-repositories.png" alt="Agregar Repositorio en HACS"/>
</div>

Busca "**Heatmap Card**" y descarga el plugin:

<div align="center">
  <img class='img-responsive' width="480" src="https://files.seeedstudio.com/wiki/solution/application/ha-heatmap/hacs-search-download.png" alt="Buscar y Descargar en HACS"/>
</div>

Después de la instalación, necesitarás recargar tu navegador. Haz clic en `RELOAD` en el aviso.

### Agregar Tarjeta al Panel

En cualquier panel, agrega tu tarjeta de mapa de calor. Por ejemplo, editemos un panel llamado `Person-Hour Statistics`.

<div align="center">
  <img class='img-responsive' width="480" src="https://files.seeedstudio.com/wiki/solution/application/ha-heatmap/ha-edit-panel.png" alt="Editar Panel de Home Assistant"/>
</div>

<div align="center">
  <img class='img-responsive' width="480" src="https://files.seeedstudio.com/wiki/solution/application/ha-heatmap/ha-add-card.png" alt="Agregar Tarjeta en Home Assistant"/>
</div>

Haz clic en "Add Card", desplázate hacia abajo hasta la sección de tarjetas personalizadas, encuentra `Heatmap Card`, y haz clic para agregarla.

<div align="center">
  <img class='img-responsive' width="480" src="https://files.seeedstudio.com/wiki/solution/application/ha-heatmap/ha-choose-card.png" alt="Elegir Tarjeta en Home Assistant"/>
</div>

### Conectar Datos

<div align="center">
  <img class='img-responsive' width="480" src="https://files.seeedstudio.com/wiki/solution/application/ha-heatmap/lovelace-heatmap-card-config.png" alt="Configuración de Tarjeta de Mapa de Calor de Lovelace"/>
</div>

El plugin tiene cuatro secciones de configuración:

- Estilo de Color (Radio, Desenfoque)
- Puntos - Coordenadas e información para diferentes puntos
- Opciones de Visualización - Mostrar leyenda de datos
- Mostrar Etiquetas de Puntos - Mostrar etiquetas para cada punto

En la configuración de la tarjeta, establece el `entity_id` para uno de los Puntos a tu ID de entidad del dispositivo (ej., `sensor.grove_vision_ai_v2_61003e7c_current_people_count`).

Una vez hecho, haz clic en Save.

---

Después de completar estos pasos, podrás ver los datos del mapa de calor mostrados dinámicamente en Home Assistant.
